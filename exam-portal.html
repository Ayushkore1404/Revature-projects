<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Exam Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: 'Segoe UI', sans-serif; }
        .hidden { display: none !important; }
        
        /* Timer Styling */
        .timer-box { 
            font-size: 1.25rem; 
            font-weight: 700; 
            padding: 8px 20px; 
            border-radius: 50px; 
            background: #fff; 
            border: 2px solid #0d6efd;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .timer-warn { border-color: #dc3545; color: #dc3545; animation: blinker 1s linear infinite; }
        @keyframes blinker { 50% { opacity: 0.2; } }

        /* Navigation Palette */
        .question-nav-btn { 
            width: 45px; height: 45px; margin: 5px; 
            border-radius: 8px; border: 1px solid #dee2e6; 
            background: #fff; transition: 0.3s;
        }
        .answered { background-color: #198754 !important; color: white; border: none; }
        .skipped { background-color: #ffc107 !important; color: #000; border: none; }
        .current-q { border: 3px solid #0d6efd; font-weight: bold; transform: scale(1.1); }

        /* Card Styling */
        .card { border: none; border-radius: 15px; }
        .list-group-item { cursor: pointer; border-radius: 10px !important; margin-bottom: 8px; border: 1px solid #eee; }
        .list-group-item:hover { background-color: #f0f7ff; }
        input[type="radio"] { cursor: pointer; }
    </style>
</head>
<body>

<div id="start-screen" class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-7">
            <div class="card shadow-lg p-4">
                <div class="card-body text-center">
                    <h1 class="text-primary fw-bold">Full Stack Certification Exam</h1>
                    <p class="text-muted">Test your knowledge in HTML, CSS, JS, and Bootstrap</p>
                    <hr>
                    <div class="row text-start my-4 bg-light p-3 rounded">
                        <div class="col-6"><strong>Duration:</strong> 10 Minutes</div>
                        <div class="col-6"><strong>Questions:</strong> 5 Total</div>
                        <div class="col-12 mt-2"><strong>Passing Score:</strong> 70%</div>
                    </div>
                    <div class="mb-4">
                        <input type="text" id="student-name" class="form-control form-control-lg" placeholder="Enter Your Name to Begin">
                    </div>
                    <button id="start-btn" class="btn btn-primary btn-lg px-5">Start Examination</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="exam-screen" class="hidden">
    <nav class="navbar bg-white shadow-sm sticky-top mb-4">
        <div class="container">
            <span class="navbar-brand fw-bold text-primary">WebDev Portal</span>
            <div id="timer" class="timer-box">10:00</div>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="card shadow-sm mb-4">
                    <div class="card-body p-4" id="question-container">
                        </div>
                    <div class="card-footer bg-white d-flex justify-content-between p-3">
                        <button class="btn btn-outline-secondary px-4" id="prev-btn">Previous</button>
                        <button class="btn btn-warning" id="skip-btn">Mark for Review</button>
                        <button class="btn btn-primary px-4" id="next-btn">Next Question</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card shadow-sm">
                    <div class="card-header bg-white fw-bold">Question Navigator</div>
                    <div class="card-body" id="nav-palette">
                        </div>
                    <div class="card-footer bg-light">
                        <button class="btn btn-danger w-100 fw-bold" id="submit-btn">Finish & Submit Exam</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="confirmModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Final Submission</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <div class="row mb-3">
                    <div class="col-6 border-end">
                        <h4 id="modal-attempted" class="text-success">0</h4>
                        <small>Attempted</small>
                    </div>
                    <div class="col-6">
                        <h4 id="modal-left" class="text-danger">0</h4>
                        <small>Unanswered</small>
                    </div>
                </div>
                <p>Are you sure you want to end the test? You cannot change your answers after submission.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-link text-decoration-none" data-bs-dismiss="modal">Go Back</button>
                <button type="button" class="btn btn-primary" id="final-confirm-btn">Yes, Submit Exam</button>
            </div>
        </div>
    </div>
</div>

<div id="result-screen" class="container mt-5 hidden">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow-lg p-4">
                <div class="text-center">
                    <h1 class="display-5 fw-bold text-success">Exam Summary</h1>
                    <h3 id="display-name" class="text-muted"></h3>
                    <hr>
                    <div class="row my-4">
                        <div class="col-md-4"><h4>Score: <span id="res-score"></span></h4></div>
                        <div class="col-md-4"><h4>Accuracy: <span id="res-percent"></span></h4></div>
                        <div class="col-md-4"><h4>Status: <span id="res-status"></span></h4></div>
                    </div>
                </div>
                
                <h4 class="mt-4 mb-3">Answer Review:</h4>
                <div id="review-list">
                    </div>
                <div class="text-center mt-4">
                    <button class="btn btn-primary px-5" onclick="location.reload()">Back to Dashboard</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
// 1. Data Structure
const questions = [
    { q: "Which property is used to change the text color in CSS?", a: ["text-color", "color", "font-style", "appearance"], correct: 1 },
    { q: "Which Bootstrap class provides a responsive fixed width container?", a: ["container-fluid", "container-fixed", "container", "box-container"], correct: 2 },
    { q: "Which sign does jQuery use as a shortcut for jQuery?", a: ["%", "&", "?", "$"], correct: 3 },
    { q: "In HTML, which attribute is used to specify an alternate text for an image?", a: ["title", "src", "alt", "longdesc"], correct: 2 },
    { q: "How do you write 'Hello World' in an alert box?", a: ["msg('Hello World')", "alertBox('Hello World')", "msgBox('Hello World')", "alert('Hello World')"], correct: 3 }
];

let currentIdx = 0;
let userAnswers = new Array(questions.length).fill(null);
let markedForReview = new Array(questions.length).fill(false);
let timeLeft = 600; // 10 minutes
let timerId;

// 2. Navigation Functions
function renderQuestion() {
    const q = questions[currentIdx];
    let html = `
        <h4 class="mb-4">Question ${currentIdx + 1} of ${questions.length}</h4>
        <p class="fs-5 mb-4">${q.q}</p>
        <div class="list-group">
    `;
    
    q.a.forEach((opt, i) => {
        const isChecked = userAnswers[currentIdx] === i ? 'checked' : '';
        html += `
            <label class="list-group-item d-flex align-items-center p-3">
                <input class="form-check-input me-3" type="radio" name="answer" value="${i}" ${isChecked} onchange="saveAnswer(${i})">
                ${opt}
            </label>
        `;
    });
    
    html += `</div>`;
    $('#question-container').html(html);
    updatePalette();
}

function saveAnswer(val) {
    userAnswers[currentIdx] = val;
    markedForReview[currentIdx] = false;
    updatePalette();
}

function updatePalette() {
    let html = '';
    questions.forEach((_, i) => {
        let status = '';
        if (i === currentIdx) status = 'current-q';
        else if (userAnswers[i] !== null) status = 'answered';
        else if (markedForReview[i]) status = 'skipped';
        html += `<button class="question-nav-btn ${status}" onclick="jumpTo(${i})">${i + 1}</button>`;
    });
    $('#nav-palette').html(html);
}

function jumpTo(i) { currentIdx = i; renderQuestion(); }

// 3. Timer Logic
function startTimer() {
    timerId = setInterval(() => {
        timeLeft--;
        let m = Math.floor(timeLeft / 60);
        let s = timeLeft % 60;
        $('#timer').text(`${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`);
        
        if (timeLeft <= 120) $('#timer').addClass('timer-warn');
        if (timeLeft <= 0) { clearInterval(timerId); finishExam(); }
    }, 1000);
}

// 4. Submission & Results
function finishExam() {
    clearInterval(timerId);
    $('#exam-screen').addClass('hidden');
    $('#result-screen').removeClass('hidden');
    
    let score = 0;
    let reviewHtml = '';

    questions.forEach((q, i) => {
        const isCorrect = userAnswers[i] === q.correct;
        if(isCorrect) score++;

        reviewHtml += `
            <div class="card mb-3 border ${isCorrect ? 'border-success' : 'border-danger'}">
                <div class="card-body">
                    <h6>${i+1}. ${q.q}</h6>
                    <p class="mb-1 small">Your Answer: <span class="${isCorrect ? 'text-success' : 'text-danger'} fw-bold">
                        ${userAnswers[i] !== null ? q.a[userAnswers[i]] : 'Skipped'}</span></p>
                    ${!isCorrect ? `<p class="mb-0 small text-muted">Correct Answer: <strong>${q.a[q.correct]}</strong></p>` : ''}
                </div>
            </div>
        `;
    });

    $('#display-name').text($('#student-name').val());
    $('#res-score').text(`${score} / ${questions.length}`);
    $('#res-percent').text(((score/questions.length)*100).toFixed(0) + "%");
    $('#res-status').text(score >= 3 ? "PASSED" : "FAILED").addClass(score >= 3 ? "text-success" : "text-danger");
    $('#review-list').html(reviewHtml);
}

// 5. Event Listeners
$(document).ready(function() {
    $('#start-btn').click(function() {
        if(!$('#student-name').val()) return alert("Please enter your name!");
        $('#start-screen').addClass('hidden');
        $('#exam-screen').removeClass('hidden');
        startTimer();
        renderQuestion();
    });

    $('#next-btn').click(function() {
        if (currentIdx < questions.length - 1) { currentIdx++; renderQuestion(); }
    });

    $('#prev-btn').click(function() {
        if (currentIdx > 0) { currentIdx--; renderQuestion(); }
    });

    $('#skip-btn').click(function() {
        markedForReview[currentIdx] = true;
        if (currentIdx < questions.length - 1) { currentIdx++; renderQuestion(); }
        else { updatePalette(); }
    });

    $('#submit-btn').click(function() {
        let attempted = userAnswers.filter(a => a !== null).length;
        $('#modal-attempted').text(attempted);
        $('#modal-left').text(questions.length - attempted);
        new bootstrap.Modal('#confirmModal').show();
    });

    $('#final-confirm-btn').click(function() {
        bootstrap.Modal.getInstance('#confirmModal').hide();
        finishExam();
    });
});
</script>
</body>
</html>